<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payroll Management System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-main">
                    <h1>üíº Payroll Management System</h1>
                    <p>Manage Employee Salaries and Payroll Efficiently</p>
                </div>
                <div class="header-user">
                    <span id="userName" class="user-name">User</span>
                    <button onclick="logout()" class="btn-logout">üö™ Logout</button>
                </div>
            </div>
        </header>

        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <nav class="nav-menu">
                <a href="#" onclick="showSection('dashboard')" class="nav-item active">
                    <span class="icon">üìä</span> Dashboard
                </a>
                <a href="#" onclick="showSection('employees')" class="nav-item">
                    <span class="icon">üë•</span> Employees
                </a>
                <a href="#" onclick="showSection('add-employee')" class="nav-item">
                    <span class="icon">‚ûï</span> Add Employee
                </a>
                <a href="#" onclick="showSection('payroll')" class="nav-item">
                    <span class="icon">üí∞</span> Payroll
                </a>
                <a href="#" onclick="showSection('reports')" class="nav-item">
                    <span class="icon">üìà</span> Reports
                </a>
                <a href="#" onclick="showSection('settings')" class="nav-item">
                    <span class="icon">‚öôÔ∏è</span> Settings
                </a>
            </nav>
        </div>

        <!-- Main Content Area -->
        <main class="main-content">
            
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <h2>Dashboard</h2>
                <div class="stats-container">
                    <div class="stat-card">
                        <h3>Total Employees</h3>
                        <p class="stat-value" id="totalEmployees">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Total Gross Salary</h3>
                        <p class="stat-value" id="totalGross">‚Çπ0.00</p>
                    </div>
                    <div class="stat-card">
                        <h3>Total Net Salary</h3>
                        <p class="stat-value" id="totalNet">‚Çπ0.00</p>
                    </div>
                    <div class="stat-card">
                        <h3>Average Salary</h3>
                        <p class="stat-value" id="avgSalary">‚Çπ0.00</p>
                    </div>
                </div>
                <div class="recent-section">
                    <h3>Recent Employees</h3>
                    <table id="recentTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Department</th>
                                <th>Position</th>
                                <th>Net Salary</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td colspan="5" style="text-align: center; vertical-align: middle;">No employees added yet</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Employees Section -->
            <section id="employees" class="section">
                <h2>Employee Management</h2>
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search by name or ID...">
                    <button onclick="searchEmployee()">Search</button>
                </div>
                <table id="employeeTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Department</th>
                            <th>Position</th>
                            <th>Base Salary</th>
                            <th>Net Salary</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td colspan="7" style="text-align: center; vertical-align: middle;">No employees found</td></tr>
                    </tbody>
                </table>
            </section>

            <!-- Add Employee Section -->
            <section id="add-employee" class="section">
                <h2>Add New Employee</h2>
                <form id="employeeForm" class="form-container">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="empId">Employee ID *</label>
                            <input type="number" id="empId" required>
                        </div>
                        <div class="form-group">
                            <label for="empName">Full Name *</label>
                            <input type="text" id="empName" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="empDept">Department *</label>
                            <input type="text" id="empDept" required>
                        </div>
                        <div class="form-group">
                            <label for="empPos">Position *</label>
                            <input type="text" id="empPos" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="baseSalary">Base Salary *</label>
                            <input type="number" id="baseSalary" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="joinDate">Date Joined *</label>
                            <input type="date" id="joinDate" required>
                        </div>
                    </div>

                    <h3>Allowances</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="da">Dearness Allowance</label>
                            <input type="number" id="da" step="0.01" value="0">
                        </div>
                        <div class="form-group">
                            <label for="hra">House Rent Allowance</label>
                            <input type="number" id="hra" step="0.01" value="0">
                        </div>
                        <div class="form-group">
                            <label for="ma">Medical Allowance</label>
                            <input type="number" id="ma" step="0.01" value="0">
                        </div>
                        <div class="form-group">
                            <label for="convey">Conveyance</label>
                            <input type="number" id="convey" step="0.01" value="0">
                        </div>
                    </div>

                    <div class="form-buttons">
                        <button type="button" onclick="addNewEmployee()" class="btn-primary">Add Employee</button>
                        <button type="reset" class="btn-secondary">Clear Form</button>
                    </div>
                </form>
            </section>

            <!-- Payroll Section -->
            <section id="payroll" class="section">
                <h2>Payroll Management</h2>
                <div class="payroll-controls">
                    <button onclick="generatePayroll()" class="btn-primary">Generate Payroll</button>
                    <button onclick="exportPayroll()" class="btn-secondary">Export to CSV</button>
                </div>
                <div id="payrollResult" style="margin-top: 20px;"></div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="section">
                <h2>Reports and Analytics</h2>
                <div class="reports-container">
                    <div class="report-card">
                        <h3>Monthly Summary</h3>
                        <table id="summaryTable">
                            <tr>
                                <th>Total Employees</th>
                                <td id="summaryEmployees">0</td>
                            </tr>
                            <tr>
                                <th>Total Gross Salary</th>
                                <td id="summaryGross">‚Çπ0.00</td>
                            </tr>
                            <tr>
                                <th>Total Deductions</th>
                                <td id="summaryDeductions">‚Çπ0.00</td>
                            </tr>
                            <tr>
                                <th>Total Net Salary</th>
                                <td id="summaryNet">‚Çπ0.00</td>
                            </tr>
                        </table>
                    </div>
                    <div class="report-card">
                        <h3>Department-wise Breakdown</h3>
                        <div id="deptBreakdown"></div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="section">
                <h2>System Settings</h2>
                <div class="settings-container">
                    <div class="settings-group">
                        <h3>Tax Configuration</h3>
                        <div class="form-group">
                            <label for="taxRate">Income Tax Rate (%)</label>
                            <input type="number" id="taxRate" step="0.1" value="10">
                        </div>
                    </div>
                    <div class="settings-group">
                        <h3>PF Configuration</h3>
                        <div class="form-group">
                            <label for="pfRate">Provident Fund Rate (%)</label>
                            <input type="number" id="pfRate" step="0.1" value="12">
                        </div>
                    </div>
                    <div class="settings-group">
                        <h3>Data Management</h3>
                        <button onclick="clearAllData()" class="btn-danger">Clear All Data</button>
                        <button onclick="downloadBackup()" class="btn-secondary">Download Backup</button>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- Modal for View Details -->
    <div id="detailsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Employee Details</h2>
            <div id="modalBody"></div>
        </div>
    </div>

    <script src="auth.js"></script>
    <script src="script.js"></script>
</body>
</html>
